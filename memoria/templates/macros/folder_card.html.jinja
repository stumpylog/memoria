{% macro folder_card(folder, child_count, image_count, button_text="View Folder", truncate_description=None) %}
    {#
    Renders a single folder card.

    Args:
        folder: The folder object (assumed to have 'name', 'description', 'pk' attributes).
        child_count: The number of child folders to display.
        image_count: The number of images to display.
        button_text: The text for the view button (defaults to "View Folder").
        truncate_description: If an integer is provided, truncate the description to this length.
    #}
    <div class="col-md-4 mb-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">{{ folder.name }}</h5>
                {# Display the description if it exists, using linebreaksbr filter and optional truncation #}
                {% if folder.description %}
                    <p class="card-text">
                        {% if truncate_description %}
                            {{ folder.description | linebreaksbr | truncate(truncate_description) }}
                        {% else %}
                            {{ folder.description | linebreaksbr }}
                        {% endif %}
                    </p>
                {% endif %}
                <p class="card-text">Contains {{ child_count }} folders(s)</p>
                <p class="card-text">Contains {{ image_count }} image(s)</p>
                {# Link to the detail view of the folder #}
                <a href="{{ url('image_folder_detail', pk=folder.pk) }}"
                   class="btn btn-primary">{{ button_text }}</a>
            </div>
        </div>
    </div>
{% endmacro %}
