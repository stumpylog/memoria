{# image_gallery.html.jinja - Reusable image gallery component #}
{% macro image_gallery(images, title="Images") %}
    <div class="container mt-4">
        <h2>{{ title }}</h2>
        {# Display the images for the current page #}
        <div class="row">
            {% for image in images %}
                <div class="col-md-4 mb-4">
                    <div class="card h-100 shadow-sm">
                        {# h-100 for equal height, shadow-sm for subtle effect #}
                        {# Check if thumbnail_url is not None/empty #}
                        {% if image.thumbnail_url %}
                            {# Image container with fixed height but preserved aspect ratio #}
                            <div style="height: 200px;
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        overflow: hidden">
                                <img src="{{ image.thumbnail_url }}"
                                     class="img-fluid img-thumbnail"
                                     alt="Thumbnail for {{ image.image_fs_id }}"
                                     style="max-height: 100%;
                                            object-fit: contain">
                            </div>
                        {% else %}
                            {# Fallback if no thumbnail URL - using Bootstrap utilities #}
                            <div class="card-img-top d-flex align-items-center justify-content-center bg-light"
                                 style="height: 200px">
                                <span class="text-muted small">No Preview</span>
                            </div>
                        {% endif %}
                        {# Optional: Add card body for details or actions #}
                        <div class="card-body">
                            <p class="card-text small text-muted text-truncate"
                               title="{{ image.image_fs_id }}">
                                {% if image.description %}{{ image.description }}{% endif %}
                            </p>
                        </div>
                    </div>
                </div>
            {% else %}
                <div class="col">
                    <p>No images available.</p>
                </div>
            {% endfor %}
        </div>
    </div>
{% endmacro %}
{% macro image_gallery_with_pagination(page_obj, title="Images") %}
    {{ image_gallery(page_obj, title) }}
    {# Pagination component #}
    {{ bootstrap_pagination(page_obj, justify_content="center") }}
{% endmacro %}
