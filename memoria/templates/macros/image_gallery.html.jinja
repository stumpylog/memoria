{# This macro assumes your image_card macro is in 'macros/image_card.html.jinja' #}
{% from "macros/image_card.html.jinja" import image_card %}
{% macro image_gallery(images, title="Images") %}
    {#
Renders a responsive grid gallery of image cards.

Args:
    images: A list or iterable of image objects.
    title: The title to display above the gallery.
#}
    <div class="container mt-4">
        {% if title %}<h2>{{ title }}</h2>{% endif %}
        {# Use Bootstrap grid for responsive layout #}
        {# row-cols-* classes control how many columns per row at different breakpoints #}
        {# g-4 adds gutter (spacing) between grid items #}
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
            {% for image in images %}
                <div class="col">
                    {# Wrap the entire card output in an anchor tag #}
                    {# Use d-block to make the link fill the column #}
                    {# text-decoration-none removes underline, text-dark keeps text color standard #}
                    <a href="{{ url('image_detail', pk=image.id) }}"
                       class="text-decoration-none text-dark d-block">
                        {# Call the image_card macro to render each card #}
                        {{ image_card(image) }}
                    </a>
                </div>
            {% else %}
                {# Content to display if the 'images' list is empty #}
                <div class="col">
                    <p>No images available.</p>
                </div>
            {% endfor %}
        </div>
    </div>
{% endmacro %}
{% macro image_gallery_with_pagination(page_obj, title="Images") %}
    {#
Renders an image gallery with pagination controls.

Args:
    page_obj: A pagination object (e.g., Django's Page object)
              assumed to have .object_list and .paginator/.page properties.
    title: The title to display above the gallery.
Assumes a 'bootstrap_pagination' macro is available in the environment.
#}
    {# Display the gallery using the objects from the current page #}
    {{ image_gallery(page_obj.object_list, title) }}
    {# Adds the pagination to the bottom center #}
    {{ bootstrap_pagination(page_obj, justify_content="center") }}
{% endmacro %}
